#!/usr/bin/env node

const meow = require('meow');
const ine = require('..');

const cli = meow(`
  Usage
    $ ine <cmd>

  Options
    -h, --help     output usage information
    -v, --version  output the version number

  Commands
    i, install [version]  install the specified version of node
    d, delete             uninstall the node
    l, link               create symlink
    c, clearCache         cache clean

  Examples
    $ ine i 9
    ✔ Done in 3.75s, node v9.0.0 is ready for you.
    $ ine i 8.8.0
    ✔ Done in 3.35s, node v8.8.0 is ready for you.
    $ ine d
    ✔ The local version is cleared.
    $ ine c
    ✔ Cleared cache.
  \n
`, {
	alias: {
    h: 'help',
    v: 'version',
	}
});


if (cli.input.length === 0) {
  cli.showHelp();
} else {
  const cmd = cli.input[0];
  if (cmd === 'i' || cmd === 'install') {
    ine.install(cli.input[1]);
  } else if (cmd === 'd' || cmd === 'delete') {
    ine.uninstall(true);
  } else if (cmd === 'l' || cmd === 'link') {
    ine.link(true);
  } else if (cmd === 'c' || cmd === 'clearCache') {
    ine.clearCache(true);
  } else {
    cli.showHelp();
  }
}
